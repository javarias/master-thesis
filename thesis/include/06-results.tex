\chapter{Tests and results}

Two sets of tests will be performed to benchmark the algorithms proposed for both problems presented in this work.
The first set will show how the solution given to ``Astronomical observation scheduling problem'', focusing the comparison with current DSA implementation done for ALMA.
The second set will show the feasibility of the proposed algorithm to solve the ``Array configuration planning problem'', focusing in the results for different scenarios.

\section{Testing the algorithms for the Astronomical observation scheduling problem}

The main feature of the DRR algorithm, presented in this work, is to try to keep the observation time given to each Executive, according to the values presented in table~\ref{table:input-executive}, along the time array configuration life. For this reason, a comparison between the ALMA's DSA and the DRR will be done. 

The metric to compare both algorithm will be the percentage of time given to each executive every week, every two weeks, every four weeks and for the whole array configuration duration. At the same time, it will be analyzed the impact of the DRR algorithm for the project completion rate at the end of the whole simulation, checking if there is any adverse effect over this parameter. The completion rate will be based at project level, accounting projects completed, started but non-completed and non-started, these categories will be broken down based on the projects science grade given: $A$, $B$ and $C$.

The test to benchmark both algorithms will be based on the input data described in section~\ref{sec:input-data}. Although the array configuration planning will be fixed to the one presented in table~\ref{table:drr-test-array-config}
\begin{table}[h!]
\begin{center}
\begin{tabular}{|c|c|c|}
\hline
Array configuration & Start date (UTC) & End date (UTC) \\ \hline
C34-6 & 2014-06-01 & 2014-07-14 \\ \hline
C34-7 & 2014-07-15 & 2014-08-31 \\ \hline
C34-6 & 2014-12-01 & 2014-12-31 \\ \hline
C34-5 & 2015-01-01 & 2015-01-31 \\ \hline
C34-4 & 2015-03-01 & 2015-03-31 \\ \hline
C34-3 & 2015-04-01 & 2015-04-30 \\ \hline
C34-2 & 2015-05-01 & 2015-05-31 \\ \hline
C34-1 & 2015-06-01 & 2015-06-30 \\ \hline
C34-4 & 2015-07-01 & 2015-07-31 \\ \hline
C34-6 & 2015-08-01 & 2015-08-30 \\ \hline
C34-7 & 2015-09-01 & 2015-10-01 \\ \hline
\end{tabular}
\end{center}
\caption{Array configuration plan used to compare DRR algorithm vs DSA algorithm}
\label{table:drr-test-array-config}
\end{table}

\begin{table}[h!]
\centering
\begin{tabular}{|r|c|c|c|} \hline
 & A-graded & B-graded & C-graded \\ \hline
 Completed & 24 & 126 & 43 \\ \hline
 Incomplete & 7 & 118 & 76 \\ \hline
 Non-Started & 2 & 58 & 472 \\ \hline
\end{tabular}
\caption{Observation projects yield for DSA run}
\label{table:dsa-run-summary}
\end{table}

\begin{table}[h!]
\centering
\begin{tabular}{|r|c|c|c|} \hline
 & A-graded & B-graded & C-graded \\ \hline
 Completed & 20 & 125 & 47 \\ \hline
 Incomplete & 11 & 123 & 81 \\ \hline
 Non-Started & 2 & 55 & 472 \\ \hline
\end{tabular}
\caption{Observation projects yield for DRR run}
\label{table:drr-run-summary}
\end{table}

\begin{table}[h!]
\centering
\begin{tabular}{c|c|c|c|c|c|c|c|} 
\cline{2-8}
 & \multicolumn{7}{c|}{Executive observation time $[h]$} \\ \hline
\multicolumn{1}{|r|}{Array Type} & CL	& EA & EA\_NA &	EU & NA & OTHER & Total \\ \hline
\multicolumn{1}{|r|}{12m} & 186 & 444 & 90 & 804 & 786 & 42 & 2352 \\ \hline
\multicolumn{1}{|r|}{TP} & 64 & 1444 & 548 & 1214 & 1416 & 0 & 4686 \\ \hline
\multicolumn{1}{|r|}{7m} & 74 & 178 & 34 & 278 & 218 & 0 & 782 \\ \hline
\end{tabular}
\caption{Executives' observed time, broken down per array configuration type, for DSA run}
\end{table}

\begin{table}[h!]
\centering
\begin{tabular}{c|c|c|c|c|c|c|c|} 
\cline{2-8}
 & \multicolumn{7}{c|}{Executive observation time $[h]$} \\ \hline
 \multicolumn{1}{|r|}{Array Type} & CL	& EA & EA\_NA &	EU & NA & OTHER & Total \\ \hline
 \multicolumn{1}{|r|}{12m} &	230 & 	472 &	110 &	778 & 	746 &	42 & 2378 \\ \hline
 \multicolumn{1}{|r|}{TP} & 116 & 944 & 632 &	1744 &	1298 & 	0 &	4734 \\ \hline
 \multicolumn{1}{|r|}{7m} & 74	& 178 & 34 & 278 & 216 & 0 & 780 \\ \hline
\end{tabular}
\caption{Executives' observed time, broken down per array configuration type, for DRR run}
\end{table}

\begin{figure}[h!]
\centering
	\begin{subfigure}[b]{0.49\textwidth}
		\includegraphics[width=\textwidth]{images/results/dsa-tp_a}
        \caption{Raw data} 
    \end{subfigure} 
    \begin{subfigure}[b]{0.49\textwidth}
    		\includegraphics[width=\textwidth]{images/results/dsa-tp_b}
            \caption{Normalized time per week} 
    \end{subfigure}
    \caption{Observation time for $TP$ array, broken-down per executive, using DSA}
    \label{fig:dsa-tp-exec}
\end{figure}

\begin{figure}[h!]
\centering
	\begin{subfigure}[b]{0.49\textwidth}
		\includegraphics[width=\textwidth]{images/results/drr-tp_a}
        \caption{Raw data} 
    \end{subfigure} 
    \begin{subfigure}[b]{0.49\textwidth}
    		\includegraphics[width=\textwidth]{images/results/drr-tp_b}
            \caption{Normalized time per week} 
    \end{subfigure}
    \caption{Observation time for $TP$ array, broken-down per executive, using DRR}
    \label{fig:drr-tp-exec}
\end{figure}

\begin{figure}[h!]
\centering
	\begin{subfigure}[b]{0.49\textwidth}
		\includegraphics[width=\textwidth]{images/results/dsa-7m_a}
        \caption{Raw data} 
    \end{subfigure} 
    \begin{subfigure}[b]{0.49\textwidth}
    		\includegraphics[width=\textwidth]{images/results/dsa-7m_b}
            \caption{Normalized time per week} 
    \end{subfigure}
    \caption{Observation time for $7m$ array, broken-down per executive, using DSA}
    \label{fig:dsa-7m-exec}
\end{figure}

\begin{figure}[h!]
\centering
	\begin{subfigure}[b]{0.49\textwidth}
		\includegraphics[width=\textwidth]{images/results/drr-7m_a}
        \caption{Raw data} 
    \end{subfigure} 
    \begin{subfigure}[b]{0.49\textwidth}
    		\includegraphics[width=\textwidth]{images/results/drr-7m_b}
            \caption{Normalized time per week} 
    \end{subfigure}
    \caption{Observation time for $7m$ array, broken-down per executive, using DRR}
    \label{fig:drr-7m-exec}
\end{figure}

\begin{figure}[h!]
\centering
	\begin{subfigure}[b]{0.49\textwidth}
		\includegraphics[width=\textwidth]{images/results/dsa-c34-2_1a}
        \caption{Raw data} 
    \end{subfigure} 
    \begin{subfigure}[b]{0.49\textwidth}
    		\includegraphics[width=\textwidth]{images/results/dsa-c34-2_1b}
            \caption{Normalized time per week} 
    \end{subfigure}
    \caption{Observation time for C34-2 array, broken-down per executive, using DSA}
    \label{fig:dsa-c34-2-exec}
\end{figure}

\begin{figure}[h!]
\centering
	\begin{subfigure}[b]{0.49\textwidth}
		\includegraphics[width=\textwidth]{images/results/drr-c34-2_1a}
        \caption{Raw data} 
    \end{subfigure} 
    \begin{subfigure}[b]{0.49\textwidth}
    		\includegraphics[width=\textwidth]{images/results/drr-c34-2_1b}
            \caption{Normalized time per week} 
    \end{subfigure}
    \caption{Observation time for C34-2 array, broken-down per executive, using DRR}
    \label{fig:drr-c34-2-exec}
\end{figure}

\section{Testing solution for the Array configuration planning problem} 
As explained in section~\ref{sec:array-config-plan}, the algorithm will, first, narrow the search space based on the A-graded Scheduling blocks, the visibility for them is presented in figure~\ref{fig:results-sb-critical-set}. At same time each SB will be assigned to one or more Array Configurations. For the case of the input data used in this work, each A-graded SB is mapped to just one Array Configuration.

\begin{figure}
        \centering
        \begin{subfigure}[b]{0.45\textwidth}
                \includegraphics[width=\textwidth]{images/c34-1_sources}
                \caption{C34-1} 
        \end{subfigure} 
        ~ %
%
        \begin{subfigure}[b]{0.45\textwidth}
                \includegraphics[width=\textwidth]{images/c34-2_sources}
                \caption{C34-2}
        \end{subfigure}

        \begin{subfigure}[b]{0.45\textwidth}
                \includegraphics[width=\textwidth]{images/c34-3_sources}
                \caption{C34-3}
        \end{subfigure}
        ~ 
        \begin{subfigure}[b]{0.45\textwidth}
                \includegraphics[width=\textwidth]{images/c34-4_sources}
                \caption{C34-4}
        \end{subfigure}% 
        
        \begin{subfigure}[b]{0.45\textwidth}
                \includegraphics[width=\textwidth]{images/c34-5_sources}
                \caption{C34-5}
        \end{subfigure}
        ~
        \begin{subfigure}[b]{0.45\textwidth}
                \includegraphics[width=\textwidth]{images/c34-6_sources}
                \caption{C34-6}
        \end{subfigure}
        
        \begin{subfigure}[b]{0.45\textwidth}
                \includegraphics[width=\textwidth]{images/c34-7_sources}
                \caption{C34-7}
        \end{subfigure}           
        \caption{Visibility of A-graded Scheduling Blocks for $12\,[m]$ Array Configurations}
		\label{fig:results-sb-critical-set}
\end{figure}

Then the LST intervals proposed by the Scheduling Block classification software can be seen in table~\ref{table:lst-int-prop}.

\begin{table}[h!]
\begin{center}
\begin{tabular}{|c|c|c|}
\hline
Array configuration & Start time (LST) & End time (LST) \\ \hline
C34-1 & 5.61692 & 15.45551 \\ \hline
C34-1 & 13.30675 & 23.14534 \\ \hline
C34-2 & 9.86519 & 19.703777 \\ \hline
C34-2 & 13.22811 & 23.06670 \\ \hline
C34-3 & 4.44851 & 14.28710 \\ \hline
C34-3 & 9.76941 & 19.60800 \\ \hline
C34-3 & 12.97411 & 22.81270 \\ \hline
C34-4 & 5.61692 & 15.45551 \\ \hline
C34-5 & 9.93925 & 19.77784 \\ \hline
C34-6 & 21.92851 & 7.76710 \\ \hline
C34-7 & 2.77808 & 12.61667 \\ \hline
C34-7 & 4.94547 & 14.78406 \\ \hline
C34-7 & 9.76941 & 19.60800 \\ \hline
\end{tabular}
\end{center}
\caption[LST intervals proposed by the Scheduling Blocks categorization]
{LST intervals proposed by the Scheduling blocks categorization described in section~\ref{sec:array-sb-classification}}
\label{table:lst-int-prop}
\end{table}